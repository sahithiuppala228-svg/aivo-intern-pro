

# Fix Google OAuth Login

## Problem Identified

The Google login button is not working because:

1. **Wrong OAuth method**: The code uses `supabase.auth.signInWithOAuth('google')` directly
2. **Missing integration**: Lovable Cloud requires using the managed OAuth solution via `lovable.auth.signInWithOAuth()`
3. **Missing package**: The `src/integrations/lovable` folder doesn't exist - the `@lovable.dev/cloud-auth-js` package needs to be configured

**Important Note about GitHub**: GitHub OAuth is **not supported** in Lovable Cloud - only Google and Apple are available. The current code doesn't have a GitHub button, which is correct.

---

## Solution Overview

### Step 1: Configure Lovable Cloud Social Auth

I will use the internal tool to:
- Generate the `src/integrations/lovable` folder
- Install the `@lovable.dev/cloud-auth-js` package
- Set up the Google OAuth configuration

This is automatic and requires no setup on your part - Lovable Cloud manages the OAuth credentials.

### Step 2: Update Auth.tsx

| Change | Details |
|--------|---------|
| Add import | `import { lovable } from "@/integrations/lovable/index";` |
| Update login function | Use `lovable.auth.signInWithOAuth("google", {...})` |
| Update button icon | Use a proper Google icon instead of Mail icon |

**Updated `handleGoogleLogin` function:**
```typescript
const handleGoogleLogin = async () => {
  setIsLoading(true);
  const { error } = await lovable.auth.signInWithOAuth("google", {
    redirect_uri: window.location.origin,
  });

  if (error) {
    setIsLoading(false);
    toast({
      title: "Error",
      description: error.message,
      variant: "destructive",
    });
  }
};
```

---

## Files to Modify

| File | Change |
|------|--------|
| `src/integrations/lovable/index.ts` | Auto-generated by configure tool |
| `src/pages/Auth.tsx` | Update Google login to use managed OAuth |

---

## What Will Work After Fix

- **Google Login**: Users can sign in with their Google accounts seamlessly
- **Email/Password**: Continues to work as-is (no changes needed)
- **Redirect**: After successful Google auth, users are redirected to profile setup

## What Won't Work

- **GitHub Login**: Not available in Lovable Cloud (only Google and Apple OAuth are supported)

---

## Technical Notes

The Lovable Cloud managed solution:
- Automatically handles OAuth credentials (no Google Cloud Console setup needed)
- Provides secure token handling
- Manages redirect URLs automatically
- Works immediately after configuration

