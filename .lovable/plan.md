

# Fix Google OAuth Login (GitHub Not Supported)

## Problem Identified

The Google login button is not working because:
1. The code uses `supabase.auth.signInWithOAuth('google')` directly
2. Lovable Cloud requires using the managed OAuth solution via `lovable.auth.signInWithOAuth()`
3. The required `@lovable.dev/cloud-auth-js` package integration is not configured

**GitHub OAuth is NOT supported in Lovable Cloud** - only Google and Apple are available.

---

## Solution

### Step 1: Configure Lovable Cloud Social Auth

Use the `supabase--configure-social-auth` tool to:
- Generate the `src/integrations/lovable` folder
- Install the `@lovable.dev/cloud-auth-js` package
- Set up the Google OAuth configuration

### Step 2: Update Auth.tsx

**Changes:**

1. Import the lovable module:
```typescript
import { lovable } from "@/integrations/lovable/index";
```

2. Update `handleGoogleLogin` function:
```typescript
const handleGoogleLogin = async () => {
  setIsLoading(true);
  const { error } = await lovable.auth.signInWithOAuth("google", {
    redirect_uri: window.location.origin,
  });

  if (error) {
    setIsLoading(false);
    toast({
      title: "Error",
      description: error.message,
      variant: "destructive",
    });
  }
};
```

3. Remove any GitHub login buttons (if present) since GitHub is not supported

4. Update the button icon from `Mail` to a proper Google icon for clarity

---

## Files to Modify

| File | Change |
|------|--------|
| `src/integrations/lovable/index.ts` | Auto-generated by configure-social-auth tool |
| `src/pages/Auth.tsx` | Update Google login to use `lovable.auth.signInWithOAuth()` |

---

## What Will Work After Fix

- **Google Login**: Users can sign in with their Google accounts
- **Email/Password**: Continues to work as-is
- **Redirect**: After successful Google auth, users are redirected to `/profile-setup`

## What Won't Work

- **GitHub Login**: Not supported in Lovable Cloud - only Google and Apple OAuth are available

---

## Technical Notes

The Lovable Cloud managed solution:
- Automatically handles OAuth credentials (no setup needed by the user)
- Provides secure token handling
- Manages redirect URLs automatically

